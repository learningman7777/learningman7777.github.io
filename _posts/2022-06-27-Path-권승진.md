---
layout: post
title:  íŒŒì´ì¬ ì½”ë”© ì§¤íŒ(pathlib)
date:   2022-06-27 00:00:00 +0900
categories: study
tags: study
comments: true
---


# pathlibğŸ™

> íŒŒì´ì¬ì—ì„œ ê²½ë¡œë¥¼ ë‹¤ë£¨ëŠë¼ ë³µì¡í•´ì§€ëŠ” ì½”ë“œë¥¼ pathlibì„ í†µí•´ ì§œë³¸ í›„ê¸° ê²¸ íš¨ìœ¨ì„ ê³µìœ í•´ë´…ë‹ˆë‹¤.

íŒŒì´ì¬ì—ì„œ ê²½ë¡œë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ í¬ê²Œ 3ê°€ì§€ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. 
- strì„ ì§ì ‘ ì“°ê¸°(ì˜ˆ: "AAA" + "/" + "BBB" )
- os.path ì‚¬ìš©(ì˜ˆ: os.path.join("AAA", "BBB") )
- pathlib ì‚¬ìš©(ì˜ˆ: Path("AAA") / "BBB" )  
<br/>
strì„ ì§ì ‘ ì“°ê¸°ëŠ” íœ´ë¨¼ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ê°€ëŠ¥ì„±ì´ ë†’ê¸° ë•Œë¬¸ì— ì§€ì–‘í•´ì•¼í•˜ë©°, os.pathì™€ pathlibì€ ì¼ë°˜ì ìœ¼ë¡œ ê²½ë¡œë¥¼ í‘œí˜„í•˜ëŠ” ê¸°ëŠ¥ì ìœ¼ë¡œëŠ” ê²°ê³¼ê°€ ê±°ì˜ ë¹„ìŠ·í•˜ë‚˜ pathlibìœ¼ë¡œ ë§Œë“  ì½”ë“œê°€ í›¨ì”¬ ê¹”ë”í•˜ë‹¤ëŠ” ì´ì•¼ê¸°ë¥¼ í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.   ê¸°ë³¸ì ì¸ ê²½ë¡œë¥¼ ë‹¤ë£¨ëŠ” ì´ì•¼ê¸°ì—ë§Œ í•œì •í•´ì„œ ì½”ë“œì˜ ê¹”ë”í•¨ì— ëŒ€í•´ì„œë§Œ ë‹¤ë£¹ë‹ˆë‹¤.

<br/>

## pathlibì´ë€?
<hr/>
python 3.4ì´ìƒ ë²„ì „ë¶€í„° íŒ¨í‚¤ì§€ ëŒ€ì‹  "ê²½ë¡œ" ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë‹¤ë£°ìˆ˜ ìˆê²Œ í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤. ë‹¹ì—°íˆ os.pathë³´ë‹¤ í˜„ëŒ€ì ì¸ ì‚¬ìš©ë²•ì´ë©°, python ê³µì‹ ë¬¸ì„œì—ì„œë„ pathlibìœ¼ë¡œ ì•ˆë˜ëŠ” ì •ë°€í•œ ì»¨íŠ¸ë¡¤ì´ í•„ìš”í•œ ì¼ì´ ì•„ë‹ˆë¼ë©´ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° pathlibì˜ ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

(os.path vs pathlib stackoverflow) https://peps.python.org/pep-0428/ 
<br/>
(PEP 428 - pathlib ì‚¬ìš© ê¶Œì¥) https://stackoverflow.com/questions/67112343/pathlib-vs-os-path-join-in-python
<br/>
(ê³µì‹ë¬¸ì„œ) https://docs.python.org/3/library/pathlib.html

<br />

## os.pathì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ë“¤ì˜ ë§µí•‘
<hr/>

ê³µì‹ ë¬¸ì„œì—ì„œ ì§ê´€ì ìœ¼ë¡œ ë§¤í•‘ì— ëŒ€í•´ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤. ëª¨ë“  í˜ì–´ë¥¼ ì œê³µí•˜ëŠ”ê±´ ì•„ë‹ˆì§€ë§Œ, ê²½í—˜ìƒ ìì£¼ ì‚¬ìš©í•˜ëŠ” os.pathí•¨ìˆ˜ì˜ ëŒ€ë¶€ë¶„ì€ ë§¤í•‘ì´ ë©ë‹ˆë‹¤.

 <!-- ![ê³µì‹ ë¬¸ì„œ ë§¤í•‘í‘œ](https://solution-userstats.s3.amazonaws.com/techblogs/seungjin/2022-06-29/1.png){: #popup } -->

<br/>

## ê¸°ë³¸ì ì¸ ì‚¬ìš©ë²•
<hr/>
ê¸°ë³¸ì ì¸ ì‚¬ìš©ë²•ì„ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤.

```python
# ê²½ë¡œ ì—°ê²°í•˜ê¸°(ìƒì„± ì‹œ)
path = Path('AAA', 'BBB', 'CCC', 'sample.jpg')
# AAA\BBB\CCC\sample.jpg

# ê²½ë¡œ ì—°ê²°í•˜ê¸°(ì¶”ê°€)
path = Path('AAA')
new_path = path / 'BBB' / 'CCC' / 'sample.jpg'
# AAA\BBB\CCC\sample.jpg

# ìƒìœ„ í´ë”ëª… êµ¬í•˜ê¸°
path = Path('AAA', 'BBB', 'CCC', 'sample.jpg')
print(path.parent)
# AAA\BBB\CCC

# ë§ˆì§€ë§‰ íŒŒì¼ëª…ë§Œ ì–»ê¸°(í™•ì¥ì ì—†ì´)
path = Path('AAA', 'BBB', 'CCC', 'sample.jpg')
print(path.stem)
# sample

# ë§ˆì§€ë§‰ íŒŒì¼ëª…ë§Œ ì–»ê¸°(í™•ì¥ì í¬í•¨)
path = Path('AAA', 'BBB', 'CCC', 'sample.jpg')
print(path.name)
# sample.jpg

# í™•ì¥ì ì–»ê¸°
path = Path('AAA', 'BBB', 'CCC', 'sample.jpg')
print(path.suffix)
# .jpg

# í´ë” ë§Œë“¤ê¸°
path = Path('AAA', 'BBB', 'CCC', 'sample.jpg')
print(path.mkdir(parents=True, exist_ok=True))
# í´ë” ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.
# parentsëŠ” AAAë‚˜ BBBë‚˜ CCCë“¤(ë¶€ëª¨ê²½ë¡œ)ì´ ì—†ì„ë•Œ, ë‹¤ ë§Œë“¤ì–´ì„œ ëª…ë ¹ì„ ì™„ìˆ˜í•  ê²ƒì´ëƒ(Trueê°’ ì „ë‹¬ ì‹œ) ì—ëŸ¬ë¥¼ ë‚¼ê²ƒì´ëƒ(False ì „ë‹¬ ì‹œ)
# exist_okëŠ” ê²½ë¡œê°€ ì´ë¯¸ ì¡´ì¬í•´ë„ ê·¸ëƒ¥ ë„˜ì–´ê°ˆ ê²ƒì´ëƒ(True ì „ë‹¬ ì‹œ) ì—ëŸ¬ë¥¼ ë‚¼ê²ƒì´ëƒ(False ì „ë‹¬ ì‹œ)
# ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ë°ì´í„°ì…‹ì„ ë‹¤ë£¨ëŠ” ì¼ë°˜ì ì¸ ê²½ìš° parents=True, exist_ok=Trueë¥¼ ê´€ìš©ì–´ ì²˜ëŸ¼ ì”ë‹ˆë‹¤.

# íŒŒì¼ê²½ë¡œ ì¡´ì¬ ì—¬ë¶€
path = Path('AAA', 'BBB', 'CCC', 'sample.jpg')
print(path.exists())
# ìˆìœ¼ë©´ True, ì—†ìœ¼ë©´ False

# glob
glob_result = Path(".").glob("*.py")
print(list(glob_result))
# [WindowsPath('setup.py'), WindowsPath('test.py')]
# í˜„ì¬ê²½ë¡œ(.)ì˜ í™•ì¥ìê°€ .pyì¸ íŒŒì¼ì„ ê²€ìƒ‰í•´ì£¼ì„¸ìš”! ë€ ëœ»ì…ë‹ˆë‹¤.
# ì‚¬ìš©ë²• ì°¸ì¡°: https://ko.wikipedia.org/wiki/%EA%B8%80%EB%A1%9C%EB%B8%8C_(%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)
```

<br/>

## string ë³€í™˜  
<hr/>
ì œì¼ ì¤‘ìš”í•œ ì‚¬ìš©ë²• stringë³€í™˜ì…ë‹ˆë‹¤. Pathê°ì²´ëŠ” ì¼ë‹¨ì€ í´ë˜ìŠ¤ê¸° ë•Œë¬¸ì— stringì„ ì…ë ¥ìœ¼ë¡œ ë°›ëŠ” ê³³ì— ì§‘ì–´ë„£ì„ë•Œ ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤.(ìš”ì¦˜ì˜ ëŒ€ë¶€ë¶„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Pathê°ì²´ë¡œ ë„£ì–´ë„ ëŒ€ì‘í•´ì„œ ì²˜ë¦¬ë˜ê¸´ í•©ë‹ˆë‹¤.)  
string ë³€í™˜ì„ í• ë•Œ, windowsêµ¬ë¶„ì ë°©ì‹('\\'), linux êµ¬ë¶„ì ë°©ì‹('/') ëª¨ë‘ ì§€ì›í•˜ì§€ë§Œ, linuxë°©ì‹ìœ¼ë¡œ ë§Œë“¤ì—ˆì„ ë•Œ windowsì—ì„œ ì²˜ë¦¬í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ëŠ” íŒŒì´ì¬ì—ì„œëŠ” í•œë²ˆë„ ëª» ë³¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ  linuxë°©ì‹ í•œê°€ì§€ë§Œ ì•Œì•„ë„ ì¶©ë¶„í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

```python
path = Path("AAA", "BBB", "CCC")
print(path.as_posix())
# AAA/BBB/CCC
```

<br/>

## os.path vs pathlib ë¯¸ì„¸í•˜ì§€ë§Œ ìœ ìš©í•œ ì°¨ì´
<hr/>
ë‹¤ë¥¸ íŒ€ì›ì´ ì“¸ í•¨ìˆ˜ë¥¼ ë§Œë“ ë‹¤ê±°ë‚˜ í• ë•Œì²˜ëŸ¼ ì…ë ¥ê°’ì„ ì½”ë“œ ì œì‘ìê°€ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ì—†ì„ë•Œ, ì…ë ¥ ê°’ì´ í° ë§¥ë½ì€ ë¹„ìŠ·í•œë° ë””í…Œì¼ì´ ì°¨ì´ë‚˜ëŠ” ìƒí™©ë“¤ì´ ë°œìƒí•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í´ë”ëª… ë§¨ ë’¤ì— '/'ë¥¼ ë¶™ì—¬ì„œ ì¤„ë•Œë„ ìˆê³  ì•ˆë¶™ì—¬ì„œ ì¤„ë•Œë„ ìˆëŠ” ìƒí™©, ë˜ windowsêµ¬ë¶„ì('\\')ê³¼ linuxêµ¬ë¶„ì('/')ê°€ ì„ì—¬ì„œ ë“¤ì–´ì˜¨ë‹¤ë˜ì§€ í•˜ëŠ” ìƒí™©ì…ë‹ˆë‹¤. ì´ëŸ´ ë•Œ ì–´ë–»ê²Œ ë“¤ì–´ì˜¤ë“  ë˜‘ê°™ì´ ê¹”ë”í•˜ê²Œ ë˜ê¸¸ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤ë©´ ì œì‘ì— í° ì§ì„ ëœê²Œ ë©ë‹ˆë‹¤. os.pathëŠ” ì–´ì¨Œë“  ìµœì¢…ê²°ê³¼ë¬¼ì„ stringì˜ í˜•ì‹ìœ¼ë¡œ ë‚´ê²Œ ë˜ê³ , pathlibì€ Pathê°ì²´ë¡œ ë³´ê´€í•˜ë‹¤ê°€ ìµœì¢…ì‚¬ìš© í˜•íƒœì—ì„œë§Œ stringì˜ í˜•ì‹ìœ¼ë¡œ ë°”ê¿€ìˆ˜ ìˆê¸° ë–„ë¬¸ì— ì •ë¦¬ì •ëˆì´ í›¨ì”¬ ê¹”ë”í•©ë‹ˆë‹¤.

```python
AAA = "AAA\\CCC"
BBB = "BBB//DDD"
print(os.path.join(AAA, BBB))
print(Path(AAA, BBB).as_posix())

# ì¶œë ¥ê°’
AAA\CCC\BBB//DDD
AAA/CCC/BBB/DDD


AAA = "AAA\\CCC"
BBB = "BBB//DDD/"
print(os.path.join(AAA, BBB))
print(Path(AAA, BBB).as_posix())

# ì¶œë ¥ê°’
AAA\CCC\BBB//DDD/
AAA/CCC/BBB/DDD
```
<br />

## ì‹¤ì œ ë¦¬íŒ©í† ë§ ì‘ì—…í–ˆë˜ ê²ƒë“¤
<hr/>

1. ë¡œì»¬ì— ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ì›ê²© ì €ì¥ì†Œì˜ DDDí´ë”ì— ì´ë¦„ê³¼ í™•ì¥ìë¥¼ ë˜‘ê°™ì´í•´ì„œ ë„£ê³  ì‹¶ì„ë•Œ, dest_file_path êµ¬í•˜ê¸°

```python
local_storage_path = "AAA/BBB/CCC/sample.jpg"
dest_dir = "DDD"

# os.path ë°©ì‹
dest_file_path = os.path.normpath(os.path.join(dest_dir, os.path.basename(local_storage_path))).replace("\\", "/")
print(dest_file_path)

#pathlib ë°©ì‹
dest_file_path = Path(dest_dir) / Path(local_storage_path).name
print(dest_file_path.as_posix())
# ê²°ê³¼: DDD/sample.jpg
```

2. object detectionì—ì„œ íŠ¹ì • ì´ë¯¸ì§€ ê²½ë¡œê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ë¼ë²¨ íŒŒì¼ ê²½ë¡œë¥¼ yoloí˜•ì‹ìœ¼ë¡œ ì¬êµ¬ì„±í•˜ê¸°

```python
# before:
# AAA/BBB/CCC/1.jpg
# AAA/BBB/CCC/1.txt

# after:
# EEE/1.jpg
# EEE/1.txt
#
before_image_path = "AAA/BBB/CCC/1.jpg"
dest_dir = "EEE"

# os.path ë°©ì‹
before_image_root, ext = os.path.splitext(before_image_path)
before_label_path = before_image_root + ".txt"
after_image_path = os.path.normpath(os.path.join(dest_dir, os.path.basename(before_image_path))).replace("\\", "/")
after_label_path = os.path.normpath(os.path.join(dest_dir, os.path.basename(before_label_path))).replace("\\", "/")
os.makedirs(os.path.dirname(after_image_path), exist_ok=True)
print(after_image_path)
print(after_label_path)

# pathlib ë°©ì‹
before_label_path = Path(before_image_path).parent / (Path(before_image_path).stem + ".txt")
after_image_path = Path(dest_dir) / Path(before_image_path).name
after_label_path = Path(dest_dir) / Path(before_label_path).name
after_image_path.parent.mkdir(parents=True, exist_ok=True)
print(after_image_path.as_posix())
print(after_label_path.as_posix())

# ê²°ê³¼
# EEE/1.jpg
# EEE/1.txt
```

## ê²°ë¡ 
pathlibì„ ì“°ë©´ ê°€ë…ì„±ì ì¸ ì¸¡ë©´ì—ì„œë„ ì¢‹ê³ , ê²½ë¡œë¥¼ í‘œí˜„í•˜ëŠ” ìì˜í•œ ì˜ˆì™¸ì‚¬í•­ë“¤ì„ ë‹¤ë£° í•„ìš”ê°€ ì—†ì–´ì„œ ì¢‹ìŠµë‹ˆë‹¤. PEP-428ë¡œ ë¬¸ì„œê°€ ìˆì„ì •ë„ë¡œ ê¶Œì¥ì‚¬í•­ì´ë¯€ë¡œ íŠ¹ë³„í•œ ê²½ìš°ê°€ ì•„ë‹ˆë©´ ëª¨ë“  ê²½ë¡œëŠ” pathlibìœ¼ë¡œ ë‹¤ë£¨ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
